<div class="container mt-5">
    <h2 class="text-center py-3">Tarefas de <%= @todo_list.name %></h2>

    <div class="d-flex justify-content-center mb-3">
        <%= link_to 'Adicionar Nova Tarefa', new_todo_list_task_path(@todo_list), class: 'btn btn-primary' %>
        <%= link_to 'Voltar às Listas', todo_lists_path, class: 'btn btn-secondary ms-2' %>
    </div>

    <% if @tasks.any? %>
    <ul class="list-group gap-2">
        <% @tasks.each do |task| %>
        <li class="list-group-item d-flex justify-content-between align-items-center bg-light">
            <div>
                <%= link_to task.title, todo_list_task_path(@todo_list, task), class: "text-decoration-none text-dark" %>
                <p class="mb-0 text-muted"><%= task.description %></p>
            </div>
            <div class="d-flex align-items-center">
                <%= form_with model: [@todo_list, task], method: :patch, class: 'd-inline me-2' do |f| %>
                <%= f.hidden_field :completed, value: !task.completed %>
                <button type="submit" class="btn btn-sm <%= task.completed ? 'btn-success' : 'btn-outline-success' %>">
                    <%= task.completed ? 'Concluído' : 'Marcar como Concluído' %>
                </button>
                <% end %>

                <%= link_to 'Editar', edit_todo_list_task_path(@todo_list, task), class: 'btn btn-sm btn-secondary me-2' %>
                <%= form_with url: todo_list_task_path(@todo_list, task), method: :delete, data: { confirm: 'Tem certeza?' }, class: 'd-inline' do %>
                <button type="submit" class="btn btn-sm btn-danger">Excluir</button>
                <% end %>
            </div>
        </li>
        <% end %>
    </ul>
    <% else %>
    <p class="text-center">Nenhuma tarefa encontrada. Clique em "Adicionar Nova Tarefa" para começar!</p>
    <% end %>
</div>